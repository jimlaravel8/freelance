(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x4f1f"],{e580:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"viewContainer"},[a("v-container",{staticClass:"pa-0"},[a("v-img",{key:t.tabImg,attrs:{src:t.tabImg,"min-height":t.tabImgHeight,"aspect-ratio":t.tabImgAspectRation,transition:"fade-transition"}},[a("v-container",{staticClass:"inner-container"},[a("v-card",{staticClass:"mt-md-12 mt-0 content-tabs-wrapper",attrs:{tile:"",elevation:"0"}},[a("v-tabs",{staticClass:"px-5 content-tabs",attrs:{color:t.$store.state.app.dark?"white":"black","icons-and-text":"",height:"100","slider-size":"4","show-arrows":""}},[a("v-tabs-slider"),a("v-tab",{staticClass:"no-caps",attrs:{to:{name:"business.issue-points"},ripple:!1}},[t._v(" "+t._s(t.$t("issue"))+" "),a("v-icon",{attrs:{size:"24"}},[t._v("mdi-coins")])],1),a("v-tab",{staticClass:"no-caps",attrs:{to:{name:"business.redeem-points"},ripple:!1}},[t._v(" "+t._s(t.$t("redeem"))+" "),a("v-icon",{attrs:{size:"24"}},[t._v("mdi-wallet-giftcard")])],1),a("v-tab",{staticClass:"no-caps",attrs:{to:{name:"business.transactions"},ripple:!1}},[t._v(" "+t._s(t.$t("transactions"))+" "),a("v-icon",{attrs:{size:"24"}},[t._v("mdi-format-list-bulleted")])],1)],1),a("v-divider")],1),a("v-tabs-items",{staticStyle:{"background-color":"transparent"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"tab-0"}},[a("v-container",{staticClass:"pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-card",{staticClass:"content-tabs-card pa-5 pt-0 mb-0 mb-md-12",attrs:{flat:"",tile:""}},[a("v-card-title",[a("v-spacer"),a("v-text-field",{staticStyle:{"max-width":"320px"},attrs:{"append-icon":"mdi-magnify",label:t.$t("search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-card-text",[a("v-divider"),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,"loading-text":t.$t("loading_items"),"no-data-text":t.$t("no_data_available"),"no-results-text":t.$t("no_results_found"),headers:t.headers,items:t.transactions,"items-per-page":5,"multi-sort":"",search:t.search,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions,itemsPerPageText:t.$t("rows_per_page"),itemsPerPageAllText:t.$t("all"),pageText:t.$t("page_of"),showFirstLastPage:!0,firstIcon:"mdi-chevron-double-left",lastIcon:"mdi-chevron-double-right",prevIcon:"mdi-chevron-left",nextIcon:"mdi-chevron-right"}},scopedSlots:t._u([{key:"item.points",fn:function(e){var a=e.item;return[t._v(t._s(t.formatNumber(a.points)))]}},t.business?{key:"item.value",fn:function(e){var a=e.item;return[t._v(t._s(t.formatCurrency(a.value)))]}}:null,t.business?{key:"item.event",fn:function(e){var s=e.item;return[a("div",[a("p",[t._v(t._s(s.event))]),a("v-chip",{attrs:{small:""}},[t._v("XCD "+t._s(s.purchase_amount))])],1)]}}:null,{key:"item.expires_at",fn:function(e){var a=e.item;return[t._v(t._s(t.formatDate(a.expires_at,"ago")))]}},{key:"item.created_at",fn:function(e){var a=e.item;return[t._v(t._s(t.formatDate(a.created_at,"lll")))]}}],null,!0)})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},i=[],n={data:function(){return{locale:"en",tab:"tab-0",tabImg:"about:blank",tabImgHeight:null,tabImgDefaultHeight:780,tabImgAspectRation:1.7778,tabImgs:[],loading:!0,business:null,search:"",itemsPerPageOptions:[10,25,50,75,100],transactions:[]}},created:function(){var t=this;this.locale=this.$auth.check()?this.$auth.user().locale:Intl.DateTimeFormat().resolvedOptions().locale||this.$i18n.locale,this.moment.locale(this.locale.substr(0,2)),this.axios.get("/business/settings",{params:{locale:this.$i18n.locale}}).then((function(e){t.business=e.data.business})),this.axios.get("/business/transactions",{params:{locale:this.$i18n.locale}}).then((function(e){t.transactions=e.data,t.loading=!1})),this.tabImgs=[this.$init.config.schemeAndHost+"/img/business-transactions-tab.jpg"],window.innerWidth>960?(this.tabImg=this.tabImgs[0],this.tabImgHeight=this.tabImgDefaultHeight,this.tabImgAspectRation=1.7778):(this.tabImgHeight=null,this.tabImgAspectRation=3);var e=new Array;this.tabImgs.forEach((function(t,a){e[a]=new Image,e[a].src=t}))},methods:{formatNumber:function(t){return new Intl.NumberFormat(this.locale.replace("_","-")).format(t)},formatCurrency:function(t){return new Intl.NumberFormat(this.locale.replace("_","-"),{style:"currency",currency:this.business.currency}).format(t)},formatDate:function(t,e){return t=null===t?"-":"ago"==e?this.moment(t).fromNow():this.moment(t).format(e),t},onResize:function(){if(window.innerWidth<=960)this.tabImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",this.tabImgHeight=null,this.tabImgAspectRation=3;else if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="==this.tabImg){var t=this.tab.split("-");this.tabImg=this.tabImgs[t[1]],this.tabImgHeight=this.tabImgDefaultHeight,this.tabImgAspectRation=1.7778}}},computed:{headers:function(){return[{text:this.$t("customer"),align:"left",sortable:!0,filterable:!0,value:"customer_number"},{text:this.$t("staff_member"),align:"left",sortable:!0,filterable:!0,value:"staff_name"},{text:this.$t("event"),align:"left",sortable:!0,filterable:!0,value:"event"},{text:this.$t("value"),align:"left",sortable:!0,value:"value"},{text:this.$t("points"),align:"left",sortable:!0,value:"points"},{text:this.$t("expires"),align:"left",sortable:!0,value:"expires_at"},{text:this.$t("date"),align:"left",sortable:!0,value:"created_at"}]}}},r=n,l=a("2877"),o=a("6544"),c=a.n(o),m=a("b0af"),u=a("99d9"),b=a("cc20"),h=a("62ad"),d=a("a523"),g=a("8fea"),v=a("ce7e"),f=a("132d"),p=a("adda"),A=a("0fd9"),_=a("2fa4"),I=a("71a3"),C=a("c671"),x=a("fe57"),w=a("aac8"),$=a("9a96"),V=a("8654"),k=a("269a"),R=a.n(k),y=a("dc22"),T=Object(l["a"])(r,s,i,!1,null,null,null);e["default"]=T.exports;c()(T,{VCard:m["a"],VCardText:u["c"],VCardTitle:u["d"],VChip:b["a"],VCol:h["a"],VContainer:d["a"],VDataTable:g["a"],VDivider:v["a"],VIcon:f["a"],VImg:p["a"],VRow:A["a"],VSpacer:_["a"],VTab:I["a"],VTabItem:C["a"],VTabs:x["a"],VTabsItems:w["a"],VTabsSlider:$["a"],VTextField:V["a"]}),R()(T,{Resize:y["a"]})}}]);
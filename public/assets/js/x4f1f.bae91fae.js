(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["x4f1f"],{e580:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"viewContainer"},[e("v-container",{staticClass:"pa-0"},[e("v-img",{key:t.tabImg,attrs:{src:t.tabImg,"min-height":t.tabImgHeight,"aspect-ratio":t.tabImgAspectRation,transition:"fade-transition"}},[e("v-container",{staticClass:"inner-container"},[e("v-card",{staticClass:"mt-md-12 mt-0 content-tabs-wrapper",attrs:{tile:"",elevation:"0"}},[e("v-tabs",{staticClass:"px-5 content-tabs",attrs:{color:t.$store.state.app.dark?"white":"black","icons-and-text":"",height:"100","slider-size":"4","show-arrows":""}},[e("v-tabs-slider"),e("v-tab",{staticClass:"no-caps",attrs:{to:{name:"business.issue-points"},ripple:!1}},[t._v(" "+t._s(t.$t("issue"))+" "),e("v-icon",{attrs:{size:"24"}},[t._v("mdi-coins")])],1),e("v-tab",{staticClass:"no-caps",attrs:{to:{name:"business.redeem-points"},ripple:!1}},[t._v(" "+t._s(t.$t("redeem"))+" "),e("v-icon",{attrs:{size:"24"}},[t._v("mdi-wallet-giftcard")])],1),e("v-tab",{staticClass:"no-caps",attrs:{to:{name:"business.transactions"},ripple:!1}},[t._v(" "+t._s(t.$t("transactions"))+" "),e("v-icon",{attrs:{size:"24"}},[t._v("mdi-format-list-bulleted")])],1)],1),e("v-divider")],1),e("v-tabs-items",{staticStyle:{"background-color":"transparent"},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab-item",{attrs:{value:"tab-0"}},[e("v-container",{staticClass:"pa-0"},[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",md:"12"}},[e("v-card",{staticClass:"content-tabs-card pa-5 pt-0 mb-0 mb-md-12",attrs:{flat:"",tile:""}},[e("v-card-title",[e("v-spacer"),e("v-text-field",{staticStyle:{"max-width":"320px"},attrs:{"append-icon":"mdi-magnify",label:t.$t("search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1),e("v-card-text",[e("v-divider"),e("v-data-table",{staticClass:"elevation-1",attrs:{loading:t.loading,"loading-text":t.$t("loading_items"),"no-data-text":t.$t("no_data_available"),"no-results-text":t.$t("no_results_found"),headers:t.headers,items:t.transactions,"items-per-page":5,"multi-sort":"",search:t.search,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions,itemsPerPageText:t.$t("rows_per_page"),itemsPerPageAllText:t.$t("all"),pageText:t.$t("page_of"),showFirstLastPage:!0,firstIcon:"mdi-chevron-double-left",lastIcon:"mdi-chevron-double-right",prevIcon:"mdi-chevron-left",nextIcon:"mdi-chevron-right"}},scopedSlots:t._u([{key:"item.points",fn:function(a){var e=a.item;return[t._v(t._s(t.formatNumber(e.points)))]}},t.business?{key:"item.value",fn:function(a){var e=a.item;return[t._v(t._s(t.formatCurrency(e.value)))]}}:null,t.business?{key:"item.event",fn:function(a){var s=a.item;return[e("div",{on:{click:function(a){return t.editAmount(s)}}},[e("p",[t._v(t._s(s.event))]),e("v-chip",{attrs:{small:""}},[t._v("XCD "+t._s(s.purchase_amount))])],1)]}}:null,{key:"item.expires_at",fn:function(a){var e=a.item;return[t._v(t._s(t.formatDate(e.expires_at,"ago")))]}},{key:"item.created_at",fn:function(a){var e=a.item;return[t._v(t._s(t.formatDate(e.created_at,"lll")))]}},{key:"item.customer_number",fn:function(a){var s=a.item;return[e("v-tooltip",{attrs:{bottom:"",color:"NavBg NagFg--text"},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[e("span",t._g(t._b({},"span",n,!1),i),[e("v-chip",{staticClass:"ma-2"},[t._v(" "+t._s(s.customer_number)+" ")])],1)]}}],null,!0)},[e("span",[t._v(" Name: "+t._s(s.customer.name)+" "),e("br"),t._v(" Location: "+t._s(s.customer.location)+" ")])])]}}],null,!0)})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),e("v-dialog",{attrs:{width:"400"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline grey lighten-2"},[t._v(" Edit Amount ")]),e("v-card-text",[e("v-text-field",{attrs:{label:"Purchase amount",required:""},model:{value:t.form.purchase_amount,callback:function(a){t.$set(t.form,"purchase_amount",a)},expression:"form.purchase_amount"}})],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e("v-snackbar",{scopedSlots:t._u([{key:"action",fn:function(a){var s=a.attrs;return[e("v-btn",t._b({attrs:{color:"pink",text:""},on:{click:function(a){t.snackbar=!1}}},"v-btn",s,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},i=[],n={data:function(){return{dialog:!1,show:!1,locale:"en",tab:"tab-0",tabImg:"about:blank",tabImgHeight:null,tabImgDefaultHeight:780,tabImgAspectRation:1.7778,tabImgs:[],loading:!0,business:null,search:"",itemsPerPageOptions:[10,25,50,75,100],transactions:[],form:{},snackbar:!1,text:"Updated"}},created:function(){var t=this;this.locale=this.$auth.check()?this.$auth.user().locale:Intl.DateTimeFormat().resolvedOptions().locale||this.$i18n.locale,this.moment.locale(this.locale.substr(0,2)),this.axios.get("/business/settings",{params:{locale:this.$i18n.locale}}).then((function(a){t.business=a.data.business})),this.axios.get("/business/transactions",{params:{locale:this.$i18n.locale}}).then((function(a){t.transactions=a.data,t.loading=!1})),this.tabImgs=[this.$init.config.schemeAndHost+"/img/business-transactions-tab.jpg"],window.innerWidth>960?(this.tabImg=this.tabImgs[0],this.tabImgHeight=this.tabImgDefaultHeight,this.tabImgAspectRation=1.7778):(this.tabImgHeight=null,this.tabImgAspectRation=3);var a=new Array;this.tabImgs.forEach((function(t,e){a[e]=new Image,a[e].src=t}))},methods:{formatNumber:function(t){return new Intl.NumberFormat(this.locale.replace("_","-")).format(t)},formatCurrency:function(t){return new Intl.NumberFormat(this.locale.replace("_","-"),{style:"currency",currency:this.business.currency}).format(t)},formatDate:function(t,a){return t=null===t?"-":"ago"==a?this.moment(t).fromNow():this.moment(t).format(a),t},onResize:function(){if(window.innerWidth<=960)this.tabImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",this.tabImgHeight=null,this.tabImgAspectRation=3;else if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="==this.tabImg){var t=this.tab.split("-");this.tabImg=this.tabImgs[t[1]],this.tabImgHeight=this.tabImgDefaultHeight,this.tabImgAspectRation=1.7778}},editAmount:function(t){console.log(t),this.dialog=!0,this.form=t},save:function(){var t=this;this.axios.patch("/business/tran_update/"+this.form.id,{locale:this.$i18n.locale,form:this.form}).then((function(a){t.snackbar=!0,t.dialog=!1,t.getTransactions(),a.data.status})).catch((function(){}))},getTransactions:function(){var t=this;this.axios.get("/business/transactions",{params:{locale:this.$i18n.locale}}).then((function(a){t.transactions=a.data,t.loading=!1}))}},computed:{headers:function(){return[{text:this.$t("customer"),align:"left",sortable:!0,filterable:!0,value:"customer_number"},{text:this.$t("staff_member"),align:"left",sortable:!0,filterable:!0,value:"staff_name"},{text:this.$t("event"),align:"left",sortable:!0,filterable:!0,value:"event"},{text:this.$t("value"),align:"left",sortable:!0,value:"value"},{text:this.$t("points"),align:"left",sortable:!0,value:"points"},{text:this.$t("expires"),align:"left",sortable:!0,value:"expires_at"},{text:this.$t("date"),align:"left",sortable:!0,value:"created_at"}]}}},r=n,o=e("2877"),l=e("6544"),c=e.n(l),m=e("8336"),u=e("b0af"),b=e("99d9"),d=e("cc20"),h=e("62ad"),v=e("a523"),g=e("8fea"),f=e("169a"),p=e("ce7e"),A=e("132d"),_=e("adda"),x=e("0fd9"),I=e("2db4"),C=e("2fa4"),k=e("71a3"),w=e("c671"),V=e("fe57"),$=e("aac8"),y=e("9a96"),R=e("8654"),T=e("3a2f"),N=e("269a"),S=e.n(N),H=e("dc22"),P=Object(o["a"])(r,s,i,!1,null,null,null);a["default"]=P.exports;c()(P,{VBtn:m["a"],VCard:u["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VChip:d["a"],VCol:h["a"],VContainer:v["a"],VDataTable:g["a"],VDialog:f["a"],VDivider:p["a"],VIcon:A["a"],VImg:_["a"],VRow:x["a"],VSnackbar:I["a"],VSpacer:C["a"],VTab:k["a"],VTabItem:w["a"],VTabs:V["a"],VTabsItems:$["a"],VTabsSlider:y["a"],VTextField:R["a"],VTooltip:T["a"]}),S()(P,{Resize:H["a"]})}}]);